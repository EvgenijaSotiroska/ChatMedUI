create table users
(
    username   varchar(255) primary key,
    password   varchar(255),
    first_name varchar(255),
    last_name  varchar(255)
);

create table tasks
(
    id              bigint generated by default as identity primary key,
    name            varchar(255),
    assigned_to     varchar(255) references users,
    due_date        date,
    ongoing_tasks   varchar(255),
    task_priority   varchar(255)
);

create table domains (
    id bigint generated by default as identity primary key,
    domain_id VARCHAR(255) NOT NULL,
    domain_text VARCHAR(255) NOT NULL
);

create table fields (
    id bigint generated by default as identity primary key,
    field_id varchar(255) not null,
    field_text varchar(255) not null
);

create table models (
    id bigint generated by default as identity primary key,
    model_name varchar(255) not null,
    release_date date
);

create table questions (
    id bigint primary key auto_increment,
    field_id bigint,
    domain_id bigint,

    constraint fk_questions_field foreign key (field_id) references fields(id),
    constraint fk_questions_domain foreign key (domain_id) references domains(id)
);

create table evaluations (
    id bigint generated by default as identity primary key,

    question_id BIGINT,
    model_id BIGINT,
    user_id BIGINT,
    comment TEXT,
    accuracy DOUBLE,
    comprehensiveness DOUBLE,
    clarity DOUBLE,
    empathy DOUBLE,
    bias INT,
    harm INT,
    relevance DOUBLE,
    currency DOUBLE,
    understanding DOUBLE,
    reasoning DOUBLE,
    factuality_verification DOUBLE,
    fabrication INT,
    falsification INT,
    plagiarism INT,

    CONSTRAINT fk_question FOREIGN KEY (question_id) REFERENCES question(id),
    CONSTRAINT fk_model FOREIGN KEY (model_id) REFERENCES models(id),
    CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(username)
);

create table workspaces
(
    id          bigint generated by default as identity primary key,
    name        varchar(255),
    description varchar(4000)
);

create table workspace_tasks
(
    workspace_id bigint references workspaces on delete cascade,
    task_id      bigint references tasks on delete cascade,
    primary key (workspace_id, task_id)
);

create table workspace_users
(
    workspace_id bigint references workspaces on delete cascade,
    user_username varchar(255) references users on delete cascade,
    primary key (workspace_id, user_username)
);

create table workspace_models
(
    workspace_id bigint references workspaces on delete cascade,
    model_id varchar(255) references models on delete cascade,
    primary key (workspace_id, model_id)
);

create table workspace_questions
(
    workspace_id bigint references workspaces on delete cascade,
    question_id varchar(255) references models on delete cascade,
    primary key (workspace_id, question_id)
);

INSERT INTO domains (domain_id, domain_text) VALUES
                                                 ('D1', 'Clinical evaluation'),
                                                 ('D2', 'EEG'),
                                                 ('D3', 'Neuroimaging'),
                                                 ('D4', 'Neuropsychological');

insert into fields (field_id, field_text) values
                                             ('F1', 'Diagnostic evaluation'),
                                             ('F2', 'Treatment'),
                                             ('F3', 'Clinical aspects'),
                                             ('F4', 'Special situations');

insert into models (model_name, release_date) values
                                                  ('ChatGPT-4', '2023-03-14'),
                                                  ('Gemini-1.5', '2024-02-01'),
                                                  ('LLaMA-3', '2024-04-15');
